(()=>{"use strict";var e={d:(t,s)=>{for(var i in s)e.o(s,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{S:()=>g});const t=document.getElementById("placeholder-item");class s{element;constructor(){const e=t.cloneNode(!0);this.element=e.content.firstElementChild}remove(){this.element.remove()}}const i=document.getElementById("item");class n{content;id;isStarred;isDone;element;#e;#t;#s;#i;#n;constructor(e,t,s,i){this.content=e,this.id=t,this.isStarred=s,this.isDone=i,this.createItem()}createItem(){const e=i.cloneNode(!0);this.element=e.content.firstElementChild,this.#e=this.element.querySelector(".checkbox-empty"),this.#t=this.element.querySelector(".checkbox"),this.#s=this.element.querySelector(".star-empty"),this.#i=this.element.querySelector(".star"),this.#n=this.element.querySelector(".deleteSVG"),this.element.querySelector(".content").textContent=this.content,this.element.id=this.id,this.#a(),this.#l(),this.setupInput()}#a(){this.isStarred?(this.#s.style.display="none",this.#i.style.display="block",this.element.classList.add("starred")):(this.#s.style.display="block",this.#i.style.display="none",this.element.classList.remove("starred"))}#l(){this.isDone?(this.#e.style.display="none",this.#t.style.display="block",this.element.classList.add("completed")):(this.#e.style.display="block",this.#t.style.display="none",this.element.classList.remove("completed"))}get delete(){return this.#n}get checkbox(){return this.#t}get checkboxEmpty(){return this.#e}get star(){return this.#i}get starEmpty(){return this.#s}toggleStarred(){this.isStarred=!this.isStarred,this.#a()}toggleDone(){this.isDone=!this.isDone,this.#l()}remove(){this.element.remove()}setupInput(){this.checkbox.addEventListener("click",(()=>{this.toggleDone()})),this.checkboxEmpty.addEventListener("click",(()=>{this.toggleDone()})),this.star.addEventListener("click",(()=>{this.toggleStarred()})),this.starEmpty.addEventListener("click",(()=>{this.toggleStarred()}))}}const a=document.getElementById("list");class l{itemsPerPage;placeholderItems;items;constructor(e=6){this.itemsPerPage=e,document.documentElement.style.setProperty("--total-items",e.toString()),this.placeholderItems=[],this.items=[],this.createBlankItems()}updateHTML(){const e=this.items;this.items=[],this.createItems(e),this.createBlankItems()}createItems(e){e.forEach((e=>{this.createItem(e.content,e.id,e.isStarred,e.isDone)}))}createItem(e,t,s=!1,i=!1){if(""==e.trim())return;null==t&&(t=`ID${Date.now()}`),this.removeBlankItem();const a=new n(e,t,s,i);this.appendItem(a),this.setupInput(a)}appendItem(e){if(0==this.items.length||e.isStarred)return a.prepend(e.element),void this.items.unshift(e);this.items[this.items.length-1].element.insertAdjacentElement("afterend",e.element),this.items.push(e)}removeBlankItem(){this.totalItemsLength>=this.itemsPerPage&&this.placeholderItems.length>0&&this.placeholderItems.pop().remove()}deleteItem(e){e.remove();const t=this.items.findIndex((t=>t.id===e.id));this.items.splice(t,1),this.createBlankItem()}setupInput(e){e.delete.addEventListener("click",(()=>{this.deleteItem(e)})),e.starEmpty.addEventListener("click",(()=>{this.starItem(e)})),e.star.addEventListener("click",(()=>{this.unStarItem(e)}))}starItem(e){this.createItem(e.content,void 0,e.isStarred,e.isDone),this.deleteItem(e)}unStarItem(e){this.deleteItem(e),this.createItem(e.content,void 0,e.isStarred,e.isDone)}createBlankItems(){const e=null==this.items?this.itemsPerPage:this.itemsPerPage-this.items.length;for(let t=0;t<e;t++){const e=new s;a.append(e.element),this.placeholderItems.push(e)}}createBlankItem(){if(this.itemsPerPage<this.totalItemsLength+1)return;const e=new s;a.append(e.element),this.placeholderItems.push(e)}loadData(e,t=!1){const s=document.getElementById("list");if(t){let t=decodeURI(window.location.hash);t="#",e=JSON.parse(t.slice(1))}e.forEach((e=>{e.element=s.querySelector(`#${e.id}`)})),this.createItems(e),console.log("Parsed 'localStorage data' as",e)}removeURLData(){window.location.hash=""}get totalItemsLength(){return this.items.length+this.placeholderItems.length}get totalItems(){return this.items.length}get completedItems(){let e=0;return this.items.forEach((t=>{!0===t.isDone&&e++})),e}get todoItems(){return this.totalItems-this.completedItems}remove(){this.items.forEach((e=>{e.remove()})),this.placeholderItems.forEach((e=>{e.remove()})),this.placeholderItems=[],this.removeURLData()}}const r=document.getElementById("tab"),o=document.querySelector("header")?.children[0];class c{element;name;id;selected;#r;#o;#c;savedList;completed;constructor(e="Unnamed",t,s=`ID${Date.now()}`,i=!1){this.selected=!0,this.createTab(e,t,s,i)}createTab(e,t,s,i){const n=r.cloneNode(!0);this.element=n.content.firstElementChild,this.#o=this.element.querySelector("#edit"),this.#r=this.element.querySelector("#close"),this.#c=this.element.querySelector("#tab-input"),this.element.id=s,this.id=s,this.savedList=t,this.name=e,this.completed=i,i&&this.complete(),this.element.classList.add("grow"),this.select(),this.#c.value=e,this.setupInput()}setupInput(){this.#o.addEventListener("click",(()=>{this.#c.focus()})),this.#r.addEventListener("click",(()=>{this.remove()})),this.#c.addEventListener("keyup",(e=>{this.name=this.#c.value,this.updateName(!1),"Enter"==e.key&&this.#c.blur()}))}select(){this.element.classList.add("selected"),this.selected=!0}deselect(){this.element.classList.remove("selected"),this.selected=!1}complete(){this.element.classList.add("tab-completed"),this.completed=!0}unComplete(){this.element.classList.remove("tab-completed"),this.completed=!1}remove(){g.removeTab(this.id)}updateName(e=!1){e?(this.name=o.value,this.#c.value=this.name):(this.name=this.#c.value,this.selected&&(o.value=this.name))}}const h=document.getElementById("add-tab"),d=document.getElementById("clear-button"),m=document.querySelector("header")?.children[0];let u;const p=document.getElementById("input"),y=document.querySelectorAll(".input-star")[0],S=document.querySelectorAll(".input-star")[1],b=document.getElementById("list"),g=new class{tabs=[];#h;constructor(e=10){h.parentNode?.addEventListener("click",(e=>{e.target instanceof Element&&"LI"===e.target.tagName&&("add-tab"===e.target.id?this.createTab():this.selectTab(e.target.id))})),this.#h=e,this.clearButton(),this.tabTitle(),this.loadData(),this.update(),window.addEventListener("click",(()=>{this.update()})),window.addEventListener("keydown",(()=>{this.update()}))}selectTab(e){this.currentTab().id!==e&&this.tabs.forEach((t=>{t.id===e&&(this.deselectTabs(),t.select(),t.updateName(),u&&u.remove(),u=t.savedList,u.updateHTML())}))}deselectTabs(){this.tabs.forEach((e=>{e.deselect()}))}completeTab(){this.currentTab().complete()}unCompleteTab(){this.currentTab().unComplete()}removeTab(e){if(1!==this.tabs.length)for(let t=0;t<this.tabs.length;t++){const s=this.tabs[t];s.id===e&&(s.element.classList.add("closing"),s.element.addEventListener("animationend",(()=>{s.selected&&this.selectTab(this.tabs[0===t?t+1:t-1].id),this.tabs[t].element.remove(),this.tabs.splice(t,1)}),{once:!0}))}}createTab(e,t,s,i){if(this.tabs.length>=this.#h)return;this.clearSelectedTabs(),u&&u.remove(),t||(u=new l,t=u);const n=new c(e,t,s,i);h.insertAdjacentElement("beforebegin",n.element),this.tabs.push(n),n.updateName()}clearSelectedTabs(){this.tabs.forEach((e=>{e.deselect()}))}currentTab(){const e=this.tabs.find((e=>!0===e.selected));if(e)return e;throw new Error("Current tab returned undefined or null")}saveData(){const e=JSON.stringify(this.tabs);localStorage.setItem("TabList",e)}loadData(){const e=localStorage.getItem("TabList");if(!e)return void this.createTab();let t;JSON.parse(e).forEach((e=>{this.createTab(e.name,void 0,e.id,e.completed);const s=e.savedList.items;s.length&&u.loadData(s),e.selected&&(t=e.id)})),t&&this.selectTab(t)}update(){if(u.items.every((e=>!0===e.isDone))&&u.items.length>=1?this.completeTab():this.unCompleteTab(),u){const e=document.getElementById("todo-items"),t=document.getElementById("completed-items"),s=document.getElementById("total-items");e.textContent=JSON.stringify(u.todoItems),t.textContent=JSON.stringify(u.completedItems),s.textContent=JSON.stringify(u.totalItems),this.saveData()}}clearButton(){d.addEventListener("click",(()=>{u.remove(),u=new l,this.currentTab().savedList=u}))}tabTitle(){m.addEventListener("keyup",(e=>{this.currentTab().updateName(!0),"Enter"==e.key&&m.blur()}))}};new class{element;isStarred;constructor(){this.element=p,this.isStarred=!1,this.setupListeners()}get value(){return this.element.value}clear(){this.element.value="",this.unStar()}star(){y.style.display="none",S.style.display="block",this.isStarred=!0}unStar(){S.style.display="none",y.style.display="block",this.isStarred=!1}setupListeners(){y.addEventListener("click",(()=>{this.star()})),S.addEventListener("click",(()=>{this.unStar()})),this.element.addEventListener("keydown",(e=>{"Enter"===e.key&&(e.preventDefault(),u.createItem(this.value,void 0,this.isStarred),b.scrollTop=b.scrollHeight,this.clear())}))}},console.log(g)})();